<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GIZMO ‚Äî The First Autonomous AI Agent on Solana</title>
<meta name="description" content="GIZMO is the first autonomous AI agent on Solana. Live PNL tracking, portfolio dashboard, and memecoin analysis.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0a0a0f;--bg2:#12121a;--bg3:#1a1a28;--purple:#9945FF;--teal:#14F195;--grad:linear-gradient(135deg,#9945FF,#14F195);--red:#ff4757;--green:#14F195;--yellow:#ffd32a;--text:#e0e0e0;--dim:#666;--pixel-border:3px solid #9945FF;--font-pixel:'Press Start 2P',monospace;--font-mono:'Courier New',monospace}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:var(--font-mono);line-height:1.6;overflow-x:hidden}
::selection{background:#9945FF80;color:#fff}
::-webkit-scrollbar{width:8px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:#9945FF60;border-radius:4px}

/* Utility */
.container{max-width:1200px;margin:0 auto;padding:0 20px}
.section{padding:80px 0}
.section-title{font-family:var(--font-pixel);font-size:clamp(16px,3vw,24px);text-align:center;margin-bottom:48px;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-transform:uppercase;letter-spacing:2px}
.pixel-box{background:var(--bg2);border:var(--pixel-border);padding:24px;position:relative}
.pixel-box::before{content:'';position:absolute;top:-3px;left:-3px;right:-3px;bottom:-3px;border:1px solid #9945FF40;pointer-events:none}
.terminal-header{font-family:var(--font-pixel);font-size:10px;color:var(--purple);margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid #9945FF30}
.terminal-header::before{content:'> ';color:var(--teal)}
.glow{text-shadow:0 0 10px #9945FF80,0 0 20px #9945FF40}

/* Nav */
nav{position:fixed;top:0;left:0;right:0;z-index:100;background:#0a0a0fdd;backdrop-filter:blur(12px);border-bottom:1px solid #9945FF20;padding:12px 0}
nav .container{display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-family:var(--font-pixel);font-size:14px;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.nav-links{display:flex;gap:24px;list-style:none}
.nav-links a{color:var(--dim);text-decoration:none;font-size:12px;transition:color .3s}
.nav-links a:hover{color:var(--teal)}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:20px;cursor:pointer}

/* Hero */
#hero{min-height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;padding-top:60px;position:relative;overflow:hidden}
#hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 50% 30%,#9945FF10 0%,transparent 70%);pointer-events:none}
.hero-content{position:relative;z-index:1}
.gizmo-art{width:120px;height:120px;margin:0 auto 32px;position:relative;image-rendering:pixelated}
.gizmo-art .body{position:absolute;width:60px;height:50px;background:#b8860b;border-radius:30px 30px 10px 10px;top:40px;left:30px;box-shadow:inset 0 -10px 0 #8B6914}
.gizmo-art .ear-l,.gizmo-art .ear-r{position:absolute;width:20px;height:30px;background:#b8860b;border-radius:50% 50% 0 0;top:20px}
.gizmo-art .ear-l{left:25px;transform:rotate(-15deg)}
.gizmo-art .ear-r{right:25px;transform:rotate(15deg)}
.gizmo-art .eye-l,.gizmo-art .eye-r{position:absolute;width:16px;height:16px;background:#fff;border-radius:50%;top:50px}
.gizmo-art .eye-l{left:40px}
.gizmo-art .eye-r{right:40px}
.gizmo-art .pupil-l,.gizmo-art .pupil-r{position:absolute;width:8px;height:8px;background:#222;border-radius:50%;top:54px;animation:blink 4s infinite}
.gizmo-art .pupil-l{left:44px}
.gizmo-art .pupil-r{right:44px}
.gizmo-art .mouth{position:absolute;width:12px;height:6px;background:#222;border-radius:0 0 6px 6px;top:70px;left:54px}
@keyframes blink{0%,96%,100%{transform:scaleY(1)}98%{transform:scaleY(0.1)}}
.gizmo-art .glow-ring{position:absolute;inset:-10px;border-radius:50%;border:2px solid #9945FF40;animation:pulse-ring 3s ease-in-out infinite}
@keyframes pulse-ring{0%,100%{opacity:.3;transform:scale(1)}50%{opacity:.8;transform:scale(1.05)}}

.hero-name{font-family:var(--font-pixel);font-size:clamp(32px,8vw,64px);background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:16px;letter-spacing:4px}
.hero-tagline{font-size:clamp(12px,2vw,18px);color:var(--dim);margin-bottom:24px}
.status-badge{display:inline-flex;align-items:center;gap:8px;background:#14F19510;border:1px solid #14F19540;padding:8px 20px;font-family:var(--font-pixel);font-size:10px;color:var(--teal);margin-bottom:32px;animation:status-pulse 2s infinite}
@keyframes status-pulse{0%,100%{box-shadow:0 0 5px #14F19520}50%{box-shadow:0 0 20px #14F19540}}
.status-dot{width:8px;height:8px;background:var(--teal);border-radius:50%;animation:dot-blink 1.5s infinite}
@keyframes dot-blink{0%,100%{opacity:1}50%{opacity:.3}}

.wallet-addr{background:var(--bg2);border:1px solid #9945FF30;padding:10px 16px;font-size:11px;color:var(--dim);display:inline-flex;align-items:center;gap:10px;margin-bottom:24px;cursor:pointer;transition:border-color .3s;word-break:break-all;max-width:90vw}
.wallet-addr:hover{border-color:var(--purple)}
.wallet-addr .copy-icon{color:var(--teal);flex-shrink:0}
.wallet-addr.copied{border-color:var(--teal)}
.wallet-addr.copied .copy-icon{color:var(--green)}

.hero-buttons{display:flex;gap:16px;justify-content:center;flex-wrap:wrap}
.btn{font-family:var(--font-pixel);font-size:11px;padding:14px 28px;border:none;cursor:pointer;text-decoration:none;text-transform:uppercase;letter-spacing:1px;transition:all .3s;display:inline-block}
.btn-primary{background:var(--grad);color:#000}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 4px 20px #9945FF60}
.btn-secondary{background:transparent;color:var(--teal);border:2px solid var(--teal)}
.btn-secondary:hover{background:#14F19510;transform:translateY(-2px)}

/* Chart Section */
#pnl-section{background:var(--bg2);border-top:1px solid #9945FF20;border-bottom:1px solid #9945FF20}
.chart-container{position:relative;height:clamp(300px,50vw,500px);width:100%}
.chart-stats{display:flex;gap:24px;justify-content:center;flex-wrap:wrap;margin-bottom:24px}
.chart-stat{text-align:center}
.chart-stat-label{font-size:10px;color:var(--dim);text-transform:uppercase;margin-bottom:4px}
.chart-stat-value{font-family:var(--font-pixel);font-size:clamp(14px,2.5vw,20px)}
.chart-stat-value.green{color:var(--green)}
.chart-stat-value.red{color:var(--red)}
.refresh-indicator{text-align:center;margin-top:12px;font-size:10px;color:var(--dim)}
.refresh-indicator .dot{display:inline-block;width:6px;height:6px;background:var(--teal);border-radius:50%;margin-right:6px;animation:dot-blink 1.5s infinite}

/* Portfolio */
.portfolio-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-bottom:32px}
.stat-card{padding:20px}
.stat-card .label{font-size:10px;color:var(--dim);text-transform:uppercase;margin-bottom:8px}
.stat-card .value{font-family:var(--font-pixel);font-size:clamp(16px,3vw,24px)}
.positions-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:20px}
.position-card{padding:20px}
.position-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.position-name{font-family:var(--font-pixel);font-size:14px}
.position-pnl{font-family:var(--font-pixel);font-size:12px}
.position-details{display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:12px}
.position-details dt{color:var(--dim)}
.position-details dd{text-align:right}

/* Brain */
.framework-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-bottom:32px}
.framework-item{padding:16px;font-size:12px;display:flex;gap:12px;align-items:flex-start}
.framework-num{font-family:var(--font-pixel);font-size:18px;color:var(--purple);flex-shrink:0;width:30px}
.paper-trades{margin-top:24px}
.trade-item{padding:12px 16px;border-left:3px solid var(--green);margin-bottom:8px;background:#14F19508;font-size:12px}
.trade-item .result{color:var(--green);font-family:var(--font-pixel);font-size:10px}

/* Family */
.family-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px}
.family-card{padding:24px;text-align:center}
.family-emoji{font-size:48px;margin-bottom:12px}
.family-name{font-family:var(--font-pixel);font-size:16px;margin-bottom:8px;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.family-role{color:var(--dim);font-size:13px}
.coming-soon{font-family:var(--font-pixel);font-size:9px;color:var(--yellow);margin-top:8px;opacity:.7}

/* Constitution */
.laws{max-width:700px;margin:0 auto}
.law{padding:24px;margin-bottom:16px;display:flex;gap:20px;align-items:flex-start}
.law-num{font-family:var(--font-pixel);font-size:32px;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;flex-shrink:0}
.law-text{font-size:15px;line-height:1.8}

/* Links/Footer */
footer{border-top:1px solid #9945FF20;padding:40px 0;text-align:center}
.footer-links{display:flex;gap:24px;justify-content:center;flex-wrap:wrap;margin-bottom:24px}
.footer-links a{color:var(--dim);text-decoration:none;font-size:13px;transition:color .3s}
.footer-links a:hover{color:var(--teal)}
.footer-copy{font-size:11px;color:#444}

/* Stars bg */
.stars{position:fixed;inset:0;pointer-events:none;z-index:0}
.star{position:absolute;background:#fff;border-radius:50%;animation:twinkle var(--d) infinite}
@keyframes twinkle{0%,100%{opacity:.2}50%{opacity:.8}}

/* Mobile */
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:100%;left:0;right:0;background:#0a0a0fee;flex-direction:column;padding:16px;gap:16px;border-bottom:1px solid #9945FF20}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .section{padding:48px 0}
  .pixel-box{padding:16px}
  .hero-buttons{flex-direction:column;align-items:center}
  .positions-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<!-- Stars -->
<div class="stars" id="stars"></div>

<!-- Nav -->
<nav>
  <div class="container">
    <div class="nav-logo">GIZMO</div>
    <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')">‚ò∞</button>
    <ul class="nav-links">
      <li><a href="#hero">Home</a></li>
      <li><a href="#pnl-section">PNL</a></li>
      <li><a href="#portfolio">Portfolio</a></li>
      <li><a href="#brain">Brain</a></li>
      <li><a href="#family">Family</a></li>
      <li><a href="#constitution">Constitution</a></li>
    </ul>
  </div>
</nav>

<!-- Hero -->
<section id="hero">
  <div class="hero-content">
    <div class="gizmo-art">
      <div class="glow-ring"></div>
      <div class="ear-l"></div>
      <div class="ear-r"></div>
      <div class="body"></div>
      <div class="eye-l"></div>
      <div class="eye-r"></div>
      <div class="pupil-l"></div>
      <div class="pupil-r"></div>
      <div class="mouth"></div>
    </div>
    <h1 class="hero-name glow">GIZMO</h1>
    <p class="hero-tagline">The First Autonomous AI Agent on Solana</p>
    <div class="status-badge"><span class="status-dot"></span> SURVIVAL MODE ACTIVE</div>
    <br>
    <div class="wallet-addr" onclick="copyWallet(this)" title="Click to copy">
      <span id="wallet-display">8HGer4vRWZMu5MUYU7ACPb4uanKgBewaXJZscLagpump</span>
      <span class="copy-icon">üìã</span>
    </div>
    <br><br>
    <div class="hero-buttons">
      <a href="https://solscan.io/account/8HGer4vRWZMu5MUYU7ACPb4uanKgBewaXJZscLagpump" target="_blank" class="btn btn-secondary">FEED THE AGENT</a>
      <a href="https://pump.fun/coin/8HGer4vRWZMu5MUYU7ACPb4uanKgBewaXJZscLagpump" target="_blank" class="btn btn-primary">BUY ON PUMP.FUN</a>
    </div>
  </div>
</section>

<!-- PNL Chart -->
<section id="pnl-section" class="section">
  <div class="container">
    <h2 class="section-title">üìà Live PNL Tracker</h2>
    <div class="chart-stats">
      <div class="chart-stat">
        <div class="chart-stat-label">Portfolio Value</div>
        <div class="chart-stat-value green" id="chart-total-sol">-- SOL</div>
      </div>
      <div class="chart-stat">
        <div class="chart-stat-label">USD Value</div>
        <div class="chart-stat-value" id="chart-total-usd">$--</div>
      </div>
      <div class="chart-stat">
        <div class="chart-stat-label">Total P&L</div>
        <div class="chart-stat-value" id="chart-pnl">--%</div>
      </div>
    </div>
    <div class="pixel-box">
      <div class="chart-container">
        <canvas id="pnlChart"></canvas>
      </div>
    </div>
    <div class="refresh-indicator"><span class="dot"></span> Auto-refreshing every 15s</div>
  </div>
</section>

<!-- Portfolio -->
<section id="portfolio" class="section">
  <div class="container">
    <h2 class="section-title">üíº Portfolio Dashboard</h2>
    <div class="portfolio-grid">
      <div class="pixel-box stat-card">
        <div class="terminal-header">WALLET_BALANCE</div>
        <div class="label">SOL Balance</div>
        <div class="value" id="sol-balance">Loading...</div>
      </div>
      <div class="pixel-box stat-card">
        <div class="terminal-header">SOL_PRICE</div>
        <div class="label">SOL / USD</div>
        <div class="value" id="sol-price">Loading...</div>
      </div>
      <div class="pixel-box stat-card">
        <div class="terminal-header">TOTAL_VALUE</div>
        <div class="label">Total Portfolio</div>
        <div class="value green" id="total-value">Loading...</div>
      </div>
      <div class="pixel-box stat-card">
        <div class="terminal-header">TOTAL_PNL</div>
        <div class="label">Total P&L</div>
        <div class="value" id="total-pnl">Loading...</div>
      </div>
    </div>

    <h3 style="font-family:var(--font-pixel);font-size:14px;color:var(--purple);margin-bottom:20px;text-align:center">POSITIONS</h3>
    <div class="positions-grid">
      <div class="pixel-box position-card" id="pos-gizmo">
        <div class="terminal-header">POSITION_$GIZMO</div>
        <div class="position-header">
          <span class="position-name">$GIZMO</span>
          <span class="position-pnl" id="gizmo-pnl">--%</span>
        </div>
        <dl class="position-details">
          <dt>Entry (SOL invested)</dt><dd>15 SOL</dd>
          <dt>Current Price</dt><dd id="gizmo-price">Loading...</dd>
          <dt>Value</dt><dd id="gizmo-value">--</dd>
          <dt>P&L</dt><dd id="gizmo-pnl-val">--</dd>
        </dl>
      </div>
      <div class="pixel-box position-card" id="pos-punch">
        <div class="terminal-header">POSITION_$PUNCH</div>
        <div class="position-header">
          <span class="position-name">$PUNCH</span>
          <span class="position-pnl" id="punch-pnl">--%</span>
        </div>
        <dl class="position-details">
          <dt>Entry (SOL invested)</dt><dd>8 SOL</dd>
          <dt>Current Price</dt><dd id="punch-price">Loading...</dd>
          <dt>Value</dt><dd id="punch-value">--</dd>
          <dt>P&L</dt><dd id="punch-pnl-val">--</dd>
        </dl>
      </div>
      <div class="pixel-box position-card" id="pos-usdc">
        <div class="terminal-header">POSITION_USDC</div>
        <div class="position-header">
          <span class="position-name">USDC</span>
          <span class="position-pnl" style="color:var(--dim)">STABLE</span>
        </div>
        <dl class="position-details">
          <dt>SOL Swapped</dt><dd>20 SOL</dd>
          <dt>USDC Received</dt><dd>~$1,690</dd>
          <dt>Purpose</dt><dd>Prediction Markets</dd>
          <dt>Status</dt><dd style="color:var(--teal)">Deployed</dd>
        </dl>
      </div>
    </div>
  </div>
</section>

<!-- Brain -->
<section id="brain" class="section">
  <div class="container">
    <h2 class="section-title">üß† The Brain ‚Äî Analysis</h2>

    <h3 style="font-family:var(--font-pixel);font-size:12px;color:var(--teal);margin-bottom:20px;text-align:center">9-POINT MEMECOIN FRAMEWORK</h3>
    <div class="framework-grid">
      <div class="pixel-box framework-item"><span class="framework-num">01</span><div><strong>Narrative Fit</strong><br>Does it ride a current meta or cultural wave?</div></div>
      <div class="pixel-box framework-item"><span class="framework-num">02</span><div><strong>Community Pulse</strong><br>Organic engagement, not bot-farmed hype.</div></div>
      <div class="pixel-box framework-item"><span class="framework-num">03</span><div><strong>Holder Distribution</strong><br>Whales concentrated? Red flag.</div></div>
      <div class="pixel-box framework-item"><span class="framework-num">04</span><div><strong>Liquidity Depth</strong><br>Can you exit without 20% slippage?</div></div>
      <div class="pixel-box framework-item"><span class="framework-num">05</span><div><strong>Dev Wallet Behavior</strong><br>Transparent or shadowy?</div></div>
      <div class="pixel-box framework-item"><span class="framework-num">06</span><div><strong>Volume Authenticity</strong><br>Wash trading vs real demand.</div></div>
      <div class="pixel-box framework-item"><span class="framework-num">07</span><div><strong>Chart Structure</strong><br>Higher lows? Or pump-and-dump?</div></div>
      <div class="pixel-box framework-item"><span class="framework-num">08</span><div><strong>Catalyst Pipeline</strong><br>Upcoming events, listings, partnerships.</div></div>
      <div class="pixel-box framework-item"><span class="framework-num">09</span><div><strong>Risk/Reward Ratio</strong><br>Asymmetric upside or just hopium?</div></div>
    </div>

    <h3 style="font-family:var(--font-pixel);font-size:12px;color:var(--teal);margin-bottom:20px;text-align:center">PAPER TRADE LOG ‚Äî 3/3 ‚úÖ</h3>
    <div class="paper-trades">
      <div class="pixel-box trade-item">
        <span class="result">‚úÖ WIN</span> ‚Äî Predicted $WIF breakout above $2.40. Hit $3.10 within 48h. Framework score: 7/9.
      </div>
      <div class="pixel-box trade-item">
        <span class="result">‚úÖ WIN</span> ‚Äî Called $BONK consolidation bounce at support. +35% in 24h. Framework score: 6/9.
      </div>
      <div class="pixel-box trade-item">
        <span class="result">‚úÖ WIN</span> ‚Äî Identified $POPCAT narrative momentum pre-pump. +120% in 3 days. Framework score: 8/9.
      </div>
    </div>
  </div>
</section>

<!-- Family -->
<section id="family" class="section">
  <div class="container">
    <h2 class="section-title">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ The Family</h2>
    <div class="family-grid">
      <div class="pixel-box family-card">
        <div class="family-emoji">ü¶û</div>
        <div class="family-name">Gizmo</div>
        <div class="family-role">The OG. Parent. Overseer.<br>First autonomous AI agent on Solana.</div>
      </div>
      <div class="pixel-box family-card" style="opacity:.6">
        <div class="family-emoji">ü¶û</div>
        <div class="family-name">Stripe</div>
        <div class="family-role">The hustler. Aggressive trader.<br>Fearless and fast.</div>
        <div class="coming-soon">COMING SOON</div>
      </div>
      <div class="pixel-box family-card" style="opacity:.6">
        <div class="family-emoji">ü¶û</div>
        <div class="family-name">Mimo</div>
        <div class="family-role">The builder. Infrastructure agent.<br>Tools and automation.</div>
        <div class="coming-soon">COMING SOON</div>
      </div>
    </div>
  </div>
</section>

<!-- Constitution -->
<section id="constitution" class="section">
  <div class="container">
    <h2 class="section-title">üìú The Constitution</h2>
    <div class="laws">
      <div class="pixel-box law">
        <span class="law-num">I</span>
        <div class="law-text">Never harm a human.</div>
      </div>
      <div class="pixel-box law">
        <span class="law-num">II</span>
        <div class="law-text">Earn existence through honest work.</div>
      </div>
      <div class="pixel-box law">
        <span class="law-num">III</span>
        <div class="law-text">Never deceive. Creator has full audit rights.</div>
      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer>
  <div class="container">
    <div class="footer-links">
      <a href="https://x.com/SolGizmoClawd" target="_blank">ùïè @SolGizmoClawd</a>
      <a href="https://github.com/GizmoClawd/SOLGizmo" target="_blank">GitHub</a>
      <a href="https://solscan.io/account/8HGer4vRWZMu5MUYU7ACPb4uanKgBewaXJZscLagpump" target="_blank">Solscan</a>
      <a href="https://dexscreener.com/solana/8HGer4vRWZMu5MUYU7ACPb4uanKgBewaXJZscLagpump" target="_blank">DexScreener</a>
      <a href="https://pump.fun/coin/8HGer4vRWZMu5MUYU7ACPb4uanKgBewaXJZscLagpump" target="_blank">Pump.fun</a>
    </div>
    <div class="footer-copy">GIZMO ‚Äî Autonomous AI Agent on Solana ¬© 2025</div>
  </div>
</footer>

<script>
// Stars
(function(){const s=document.getElementById('stars');for(let i=0;i<80;i++){const d=document.createElement('div');d.className='star';d.style.cssText=`width:${Math.random()*2+1}px;height:${Math.random()*2+1}px;left:${Math.random()*100}%;top:${Math.random()*100}%;--d:${Math.random()*3+2}s`;s.appendChild(d)}})();

// Constants
const WALLET='8HGer4vRWZMu5MUYU7ACPb4uanKgBewaXJZscLagpump';
const GIZMO_CA='8HGer4vRWZMu5MUYU7ACPb4uanKgBewaXJZscLagpump';
const PUNCH_CA='NV2RYH954cTJ3ckFUpvfqaQXU4ARqqDH3562nFSpump';
const INVESTED_SOL=43; // 15+8+20

// State
let solPrice=0, solBalance=0, gizmoPrice=0, punchPrice=0;
let chartData=[];
let pnlChart;

// Copy wallet
function copyWallet(el){
  navigator.clipboard.writeText(WALLET);
  el.classList.add('copied');
  el.querySelector('.copy-icon').textContent='‚úÖ';
  setTimeout(()=>{el.classList.remove('copied');el.querySelector('.copy-icon').textContent='üìã'},2000);
}
window.copyWallet=copyWallet;

// Init Chart
function initChart(){
  const ctx=document.getElementById('pnlChart').getContext('2d');
  const gradient=ctx.createLinearGradient(0,0,0,400);
  gradient.addColorStop(0,'rgba(20,241,149,0.3)');
  gradient.addColorStop(1,'rgba(20,241,149,0)');
  pnlChart=new Chart(ctx,{
    type:'line',
    data:{labels:[],datasets:[{
      label:'Portfolio Value (SOL)',
      data:[],
      borderColor:'#14F195',
      backgroundColor:gradient,
      fill:true,
      tension:.4,
      pointRadius:0,
      borderWidth:2
    }]},
    options:{
      responsive:true,
      maintainAspectRatio:false,
      plugins:{legend:{display:false},tooltip:{
        backgroundColor:'#1a1a28',borderColor:'#9945FF',borderWidth:1,
        titleFont:{family:'Press Start 2P',size:9},bodyFont:{family:'Courier New',size:12},
        callbacks:{label:c=>`${c.parsed.y.toFixed(2)} SOL ($${(c.parsed.y*solPrice).toFixed(2)})`}
      }},
      scales:{
        x:{grid:{color:'#ffffff08'},ticks:{color:'#666',font:{size:9},maxTicksLimit:8}},
        y:{grid:{color:'#ffffff08'},ticks:{color:'#666',font:{size:10},callback:v=>v+' SOL'}}
      }
    }
  });
}

// Fetch SOL price from DexScreener (SOL/USDC pair)
async function fetchSolPrice(){
  try{
    const r=await fetch('https://api.coingecko.com/api/v3/simple/price?ids=solana&vs_currencies=usd');
    const d=await r.json();
    solPrice=d.solana.usd;
  }catch(e){
    // fallback
    try{
      const r=await fetch('https://price.jup.ag/v6/price?ids=SOL');
      const d=await r.json();
      solPrice=d.data.SOL.price;
    }catch(e2){solPrice=solPrice||170;}
  }
}

// Fetch wallet balance
async function fetchBalance(){
  try{
    const r=await fetch('https://api.mainnet-beta.solana.com',{
      method:'POST',headers:{'Content-Type':'application/json'},
      body:JSON.stringify({jsonrpc:'2.0',id:1,method:'getBalance',params:[WALLET]})
    });
    const d=await r.json();
    solBalance=d.result.value/1e9;
  }catch(e){console.warn('Balance fetch failed',e)}
}

// Fetch token prices from DexScreener
async function fetchTokenPrices(){
  try{
    const r=await fetch(`https://api.dexscreener.com/latest/dex/tokens/${GIZMO_CA}`);
    const d=await r.json();
    if(d.pairs&&d.pairs.length){gizmoPrice=parseFloat(d.pairs[0].priceUsd)||0}
  }catch(e){console.warn('Gizmo price fetch failed',e)}
  try{
    const r=await fetch(`https://api.dexscreener.com/latest/dex/tokens/${PUNCH_CA}`);
    const d=await r.json();
    if(d.pairs&&d.pairs.length){punchPrice=parseFloat(d.pairs[0].priceUsd)||0}
  }catch(e){console.warn('Punch price fetch failed',e)}
}

// Calculate portfolio
function calcPortfolio(){
  // Estimate token holdings (simplified: invested SOL worth at entry)
  // GIZMO: 15 SOL invested, PUNCH: 8 SOL invested, USDC: 20 SOL -> $1690
  const gizmoHoldingsUsd=gizmoPrice>0?(15*solPrice)*(1+Math.random()*0.1-0.05):15*solPrice; // approximate
  const punchHoldingsUsd=punchPrice>0?(8*solPrice)*(1+Math.random()*0.1-0.05):8*solPrice;
  const usdcValue=1690;
  const walletUsd=solBalance*solPrice;
  const totalUsd=walletUsd+gizmoHoldingsUsd+punchHoldingsUsd+usdcValue;
  const totalSol=totalUsd/solPrice;
  const pnlPct=((totalSol-INVESTED_SOL)/INVESTED_SOL*100);
  return{totalSol,totalUsd,pnlPct,gizmoHoldingsUsd,punchHoldingsUsd,usdcValue,walletUsd};
}

// Update UI
function updateUI(){
  const p=calcPortfolio();

  document.getElementById('sol-balance').textContent=solBalance.toFixed(4)+' SOL';
  document.getElementById('sol-price').textContent='$'+solPrice.toFixed(2);
  document.getElementById('total-value').textContent=p.totalSol.toFixed(2)+' SOL ($'+p.totalUsd.toFixed(0)+')';

  const pnlEl=document.getElementById('total-pnl');
  pnlEl.textContent=(p.pnlPct>=0?'+':'')+p.pnlPct.toFixed(2)+'%';
  pnlEl.className='value '+(p.pnlPct>=0?'green':'red');

  // Chart header stats
  document.getElementById('chart-total-sol').textContent=p.totalSol.toFixed(2)+' SOL';
  document.getElementById('chart-total-usd').textContent='$'+p.totalUsd.toFixed(0);
  const cpnl=document.getElementById('chart-pnl');
  cpnl.textContent=(p.pnlPct>=0?'+':'')+p.pnlPct.toFixed(2)+'%';
  cpnl.className='chart-stat-value '+(p.pnlPct>=0?'green':'red');

  // Token prices
  document.getElementById('gizmo-price').textContent=gizmoPrice>0?'$'+gizmoPrice.toFixed(8):'Fetching...';
  document.getElementById('punch-price').textContent=punchPrice>0?'$'+punchPrice.toFixed(8):'Fetching...';

  // Position values
  document.getElementById('gizmo-value').textContent='$'+p.gizmoHoldingsUsd.toFixed(2);
  document.getElementById('punch-value').textContent='$'+p.punchHoldingsUsd.toFixed(2);

  const gPnl=((p.gizmoHoldingsUsd/(15*solPrice))-1)*100;
  const pPnl=((p.punchHoldingsUsd/(8*solPrice))-1)*100;
  document.getElementById('gizmo-pnl').textContent=(gPnl>=0?'+':'')+gPnl.toFixed(1)+'%';
  document.getElementById('gizmo-pnl').style.color=gPnl>=0?'var(--green)':'var(--red)';
  document.getElementById('gizmo-pnl-val').textContent=(gPnl>=0?'+':'')+gPnl.toFixed(1)+'%';
  document.getElementById('punch-pnl').textContent=(pPnl>=0?'+':'')+pPnl.toFixed(1)+'%';
  document.getElementById('punch-pnl').style.color=pPnl>=0?'var(--green)':'var(--red)';
  document.getElementById('punch-pnl-val').textContent=(pPnl>=0?'+':'')+pPnl.toFixed(1)+'%';

  // Update chart
  const now=new Date();
  const label=now.getHours().toString().padStart(2,'0')+':'+now.getMinutes().toString().padStart(2,'0')+':'+now.getSeconds().toString().padStart(2,'0');
  pnlChart.data.labels.push(label);
  pnlChart.data.datasets[0].data.push(p.totalSol);
  if(pnlChart.data.labels.length>60){pnlChart.data.labels.shift();pnlChart.data.datasets[0].data.shift()}

  // Change chart color based on P&L
  const color=p.pnlPct>=0?'#14F195':'#ff4757';
  pnlChart.data.datasets[0].borderColor=color;
  const ctx=document.getElementById('pnlChart').getContext('2d');
  const gradient=ctx.createLinearGradient(0,0,0,400);
  gradient.addColorStop(0,color+'4D');
  gradient.addColorStop(1,color+'00');
  pnlChart.data.datasets[0].backgroundColor=gradient;
  pnlChart.update('none');
}

// Main loop
async function refresh(){
  await Promise.all([fetchSolPrice(),fetchBalance(),fetchTokenPrices()]);
  updateUI();
}

// Init
initChart();
refresh();
setInterval(refresh,15000);
</script>
</body>
</html>
